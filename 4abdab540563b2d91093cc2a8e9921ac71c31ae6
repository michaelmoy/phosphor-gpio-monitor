{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "336f8587_7bee11b9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1001918
      },
      "writtenOn": "2023-10-10T22:22:56Z",
      "side": 1,
      "message": "Does the phosphor-multi-gpio-presence service create the InterfaceAdded, PropertyChanged D-Bus signal when it adds/Updated new D-Bus inventory path? I tested the patch set with below configuration to create CPU_1/CPU_2 Presence D-Bus inventory path.\n```\n[\n    {\n        \"Name\": \"CPU_1\",\n        \"LineName\": \"presence-cpu0\",\n        \"ActiveLow\": true,\n        \"Inventory\": \"/system/chassis/motherboard/CPU_1\"\n    },\n    {\n        \"Name\": \"CPU_2\",\n        \"LineName\": \"presence-cpu1\",\n        \"ActiveLow\": true,\n        \"Inventory\": \"/system/chassis/motherboard/CPU_2\"\n    }\n]\nI can see that the inventory paths are added as expected.\n```\n        `-/xyz/openbmc_project/inventory/system/chassis\n          `-/xyz/openbmc_project/inventory/system/chassis/motherboard\n            |-/xyz/openbmc_project/inventory/system/chassis/motherboard/CPU_1\n            `-/xyz/openbmc_project/inventory/system/chassis/motherboard/CPU_2\n```\n\nThis added D-Bus inventory paths\n then will be used by ADC sensor service in dbus-sensor repo to create the corresponding sensors base on the existing of CPU_1/CPU_2 inventory path. (The sensor with CPURequired\u003d1 only are created when `Present` property in the inventory path /xyz/openbmc_project/inventory/system/chassis/motherboard/CPU_2 is True.)\n https://github.com/openbmc/dbus-sensors/blob/436c5bdb25c775138c901dc707f203c076adcb97/src/ADCSensorMain.cpp#L403\n https://github.com/openbmc/dbus-sensors/blob/436c5bdb25c775138c901dc707f203c076adcb97/src/ADCSensorMain.cpp#L377",
      "revId": "4abdab540563b2d91093cc2a8e9921ac71c31ae6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d290656c_5a13eb38",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1001422
      },
      "writtenOn": "2023-10-11T07:13:23Z",
      "side": 1,
      "message": "No it doesn\u0027t. phosphor-multi-gpio-presence doesn\u0027t create the interface, nor does it change the interface. It\u0027s the same behaviour as with phosphor-gpio-presence.\n\nWhen it calls `Notify` on xyz.openbmc_project.Inventory.Manager the inventory service will generate a `PropertyChanged` though:\n\nbusctl monitor on SBP1:\n```\n\u003e Type\u003dmethod_call  Endian\u003dl  Flags\u003d0  Version\u003d1 Cookie\u003d3  Timestamp\u003d\"Wed 2023-10-11 07:04:13.226005 UTC\"\n  Sender\u003d:1.529  Destination\u003dxyz.openbmc_project.Inventory.Manager  Path\u003d/xyz/openbmc_project/inventory  Interface\u003dxyz.openbmc_project.Inventory.Manager  Member\u003dNotify\n  UniqueName\u003d:1.529                                           \n  MESSAGE \"a{oa{sa{sv}}}\" {\n          ARRAY \"{oa{sa{sv}}}\" {   \n                  DICT_ENTRY \"oa{sa{sv}}\" {\n                          OBJECT_PATH \"/system/chassis/motherboard/dimm_c0e2\";\n                          ARRAY \"{sa{sv}}\" {\n                                  DICT_ENTRY \"sa{sv}\" {\n                                          STRING \"xyz.openbmc_project.Inventory.Item\";\n                                          ARRAY \"{sv}\" {\n                                                  DICT_ENTRY \"sv\" {\n                                                          STRING \"Present\";\n                                                          VARIANT \"b\" {\n                                                                  BOOLEAN true;\n                                                          };                                            \n                                                  };                                                                                                    \n                                                  DICT_ENTRY \"sv\" {\n                                                          STRING \"PrettyName\";\n                                                          VARIANT \"s\" {\n                                                                  STRING \"DIMM_C0E2\";\n                                                          };\n                                                  };\n                                          };\n                                  };                                 \n                          };\n                  };\n          };\n  }; \n\n\u003e Type\u003dsignal  Endian\u003dl  Flags\u003d1  Version\u003d1 Cookie\u003d1409  Timestamp\u003d\"Wed 2023-10-11 07:04:13.230415 UTC\"\n  Sender\u003d:1.56  Path\u003d/xyz/openbmc_project/inventory/system/chassis/motherboard/dimm_c0e2  Interface\u003dorg.freedesktop.DBus.Properties  Member\u003dPropertiesChanged\n  UniqueName\u003d:1.56                                                                                                                                           \n  MESSAGE \"sa{sv}as\" {                                                                                                                                       \n          STRING \"xyz.openbmc_project.Inventory.Item\";                                                                                                       \n          ARRAY \"{sv}\" {                                                                                                                                     \n                  DICT_ENTRY \"sv\" {                   \n                          STRING \"Present\";           \n                          VARIANT \"b\" {               \n                                  BOOLEAN true;\n                          };                                         \n                  };                           \n          };                                   \n          ARRAY \"s\" {                          \n          };                \n  }; \n```\n\nAs you can see the `Sender` is different, the functionality is still given and dbus-sensors should see the PropertiesChanged.",
      "parentUuid": "336f8587_7bee11b9",
      "revId": "4abdab540563b2d91093cc2a8e9921ac71c31ae6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}